# [å­—èŠ‚åºåˆ—(`binary`)ï¼Œå­—ç¬¦ä¸²(`string`)å’Œå­—ç¬¦åˆ—è¡¨(`charlist`)](https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/elixir/pages/getting-started/binaries-strings-and-charlists.md)

## `Unicode` å’Œ ç ç‚¹(`code points`)

ä¸ºäº†è®©ä¸åŒè®¡ç®—æœºé€šè¿‡ä¸åŒè¯­è¨€çš„äº¤æµæœ‰æ„ä¹‰ï¼Œéœ€è¦ä¸€å¥—æ ‡å‡†è®©ä¸€è¿ä¸²çš„0å’Œ1åœ¨ä¸åŒç¤¾åˆ«è§ä¼ é€’æ—¶è¡¨ç¤ºç›¸åŒçš„æ„æ€ï¼Œ`Unicode`æ ‡å‡†æ‰®æ¼”äº†è¿™ä¸ªè§’è‰²ï¼Œç”¨äºè¡¨ç¤ºæˆ‘ä»¬å®é™…ä¸Šå·²çŸ¥çš„æ‰€æœ‰å­—ç¬¦ï¼ŒåŒ…æ‹¬ å¤å…¸çš„å†å²æ–‡å­—ï¼Œemojiï¼Œæ ¼å¼ï¼Œä»¥åŠæ§åˆ¶å­—ç¬¦ç­‰ç­‰ã€‚

`Unicode`å°†æ‰€æœ‰çš„å­—ç¬¦ç»„ç»‡åœ¨ä¸€å¼  `code charts`ä¸­ï¼Œæ¯ä¸€ä¸ªå­—ç¬¦éƒ½è¢«èµ‹äºˆäº†å”¯ä¸€çš„æ•°å­—ç´¢å¼•ã€‚è¿™ä¸ªæ•°å­—ç´¢å¼•è¢«ç§°ä½œ `Code Point`

```elixir
# å¯ä»¥é€šè¿‡ï¼ŸæŸ¥çœ‹ç ç‚¹
iex(1)> ?a
97
```
`Unicode`æŸ¥è¯¢ç ç‚¹ä½¿ç”¨ç ç‚¹çš„16è¿›åˆ¶è¡¨è¾¾æ–¹å¼ï¼Œ`Elixir`ä¸­å¯ä»¥é€šè¿‡`\uXXXX`çš„å½¢å¼æŸ¥çœ‹Unicodeå­—ç¬¦

```elixir
iex(8)> "\u0061"
"a"
iex(9)> "\u0061" == "a"
true
iex(10)> 0x0061 = 97 = ?a
97
```

## UTF-8 å’Œ ç¼–ç 

`code point`æ˜¯å­˜å‚¨çš„å†…å®¹ï¼Œ`encode`å¤„ç†çš„æ˜¯å¦‚ä½•å­˜å‚¨ï¼Œç¼–ç æ˜¯ä¸€ç§å®ç°ï¼Œ
æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§åŸç†å°†`code point`è½¬æ¢æˆ`bytes`ä»¥ä¾¿äºå­˜å‚¨åœ¨å†…å­˜ï¼Œå†™å…¥ç¡¬ç›˜ã€‚

`Elixir`ä½¿ç”¨`UTF-8`ç¼–ç ï¼Œæ¯ä¸ªç ç‚¹è¢«ç¼–ç æˆä¸€ä¸²çš„8ä½çš„å­—èŠ‚(bytes)ï¼Œ`UTF-8`æ˜¯ä¸€ä¸ªå¯å˜é•¿åº¦çš„å­—ç¬¦ç¼–ç ï¼Œä»–ä½¿ç”¨1-4ä¸ªå­—èŠ‚æ¥å­˜å‚¨æ¯ä¸ªç ç‚¹ï¼Œå¯ä»¥å¤„ç†æ‰€æœ‰`Unicode`å­—ç¬¦ã€‚

```elixir
# `UTF-8`è¿˜å¯ä»¥è¡¨ç¤ºå›¾å½¢ï¼Œä¸€ä¸ªå›¾å½¢æœ‰å¯èƒ½æ˜¯æœ‰å¤šä¸ªå›¾å½¢ç»„æˆçš„ã€‚
# æ¯”å¦‚ å¥³æ€§æ¶ˆé˜²å‘˜`ğŸ‘©â€ğŸš’` æ˜¯ç”± å¥³å­©ï¼Œæ¶ˆé˜²è½¦å’Œä¸€ä¸ª0é•¿é“¾æ¥ç¬¦ç»„æˆçš„["ğŸ‘©", "â€", "ğŸš’"]
iex(3)> String.codepoints("ğŸ‘©â€ğŸš’")
["ğŸ‘©", "â€", "ğŸš’"]

# ExlixiræŠŠä»–å½“æˆä¸€ä¸ªå­—ç¬¦é•¿
iex(4)> String.length("ğŸ‘©â€ğŸš’")
1
```

å¦‚æœè¦æŸ¥çœ‹ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚ å¯ä»¥ä½¿ç”¨`<<0>>`æ‹¼æ¥

```elixir
# æŸ¥çœ‹å­—èŠ‚åºåˆ— ä½¿ç”¨`<<0>>`æ‹¼æ¥
iex(7)> "ğŸ‘©"<> <<0>>
<<240, 159, 145, 169, 0>>

# ä¹Ÿå¯ä»¥ä½¿ç”¨`IO.inspect/2`æ–¹æ³•æŸ¥çœ‹
iex(11)> IO.inspect "ğŸ‘©" , binaries: :as_binaries
<<240, 159, 145, 169>>
```

# æ¯”ç‰¹ä¸²(`bitstring`)

`Elixir`ä¸­ä½¿ç”¨`<<>>`è¡¨ç¤ºæ¯”ç‰¹ä¸²ï¼Œä»–æ˜¯å†…å­˜ä¸­çš„ä¸€ä¸²è¿ç»­çš„æ¯”ç‰¹ä½åºåˆ—ã€‚
åœ¨æ¯”ç‰¹ä¸²ä¸­ï¼Œé»˜è®¤ä½¿ç”¨8ä½å­˜å‚¨æ¯ä¸ªæ•°å­—ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `::n`æˆ–è€…`::size(n)`æ‰‹åŠ¨æŒ‡å®šä½æ•°ã€‚

```elixir
# é»˜è®¤8ä½å­˜å‚¨
iex(12)> <<42>> ==<<42::8>>
true

# ä¿®æ”¹æˆ6ä½å­˜å‚¨
iex(13)> <<42::6>>
<<42::size(6)>>

iex(18)> <<1::1, 0::1, 1::1, 0::1, 1::1, 0::1>> == <<42::6>>
true

# å¦‚æœä¸€ä¸ªå€¼æº¢å‡ºå¯ä»¥å­˜çš„èŒƒå›´ ä¼šè¢«æˆªæ–­
iex(19)> <<1>> == <<257>>
true

```

## å­—èŠ‚åºåˆ—(`binary`)

å­—èŠ‚åºåˆ—æ˜¯ä¸€ä¸ªä½æ•°èƒ½è¢«8æ•´é™¤çš„æ¯”ç‰¹ä¸²ï¼Œæ¯ä¸ªå­—èŠ‚åºåˆ—éƒ½æ˜¯æ¯”ç‰¹ä¸²ï¼Œä½†æ˜¯æ¯”ç‰¹ä¸²ä¸ä¸€å®šæ˜¯å­—èŠ‚åºåˆ—ã€‚

```elixir
iex(21)> is_binary(<<3::4>>)
false
iex(22)> is_binary(<<3::8>>)
true
```

å­—èŠ‚åºåˆ—/æ¯”ç‰¹ä¸²ä¹Ÿå¯ä»¥è¿›è¡Œæ¨¡å¼åŒ¹é…

```elixir
iex(23)> <<0, 1, x>> = <<0, 1, 2>>
<<0, 1, 2>>

iex(24)> <<0, 1, x>> = <<0, 1, 2, 3>>
** (MatchError) no match of right hand side value: <<0, 1, 2, 3>>
# åœ¨ä¸çŸ¥é“è¦åŒ¹é…çš„æ¯”ç‰¹ä¸²é•¿åº¦æ—¶ï¼Œå¯ä»¥ä½¿ç”¨::binary
iex(24)> <<0, 1, x::binary>> = <<0, 1, 2, 3>>
<<0, 1, 2, 3>>

# è¿˜æœ‰ä¸€ç³»åˆ—å…¶ä»–çš„ä¿®é¥°ç¬¦ï¼Œç”¨äºå­—èŠ‚åºåˆ—çš„æ¨¡å¼åŒ¹é…
iex(25)> <<head::binary-size(2), rest::binary>> = <<0, 1, 2, 3>>
<<0, 1, 2, 3>>
iex(26)> head
<<0, 1>>
```

åœ¨`Elixir`ä¸­ å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªUTF-8ç¼–ç çš„å­—èŠ‚åºåˆ—ï¼Œæ¯ä¸ªç ç‚¹ä½¿ç”¨1-4ä¸ªå­—èŠ‚ã€‚
å­—ç¬¦ä¸²éƒ½æ˜¯å­—èŠ‚åºåˆ—ï¼Œä½†ä¸æ˜¯æ‰€æœ‰å­—èŠ‚åºåˆ—éƒ½æ˜¯åˆæ³•çš„å­—ç¬¦ä¸²ã€‚

```elixir
iex(27)> is_binary("hello")
true
iex(28)> is_binary(<<239, 191, 19>>)
true
iex(29)> String.valid?(<<239, 191, 19>>)
false
```

`<>`å®é™…æ˜¯å­—èŠ‚åºåˆ—çš„è¿æ¥æ“ä½œç¬¦ã€‚

```elixir
iex(30)> "a" <> "ha"
"aha"
iex(31)> <<0, 1>> <> <<2, 3>>
<<0, 1, 2, 3>>
```

æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸Šä½¿ç”¨ æ¨¡å¼åŒ¹é…

```elixir
iex(32)> <<head, rest::binary>> = "banana"
"banana"
iex(33)> head == ?b
true
iex(34)> rest
"anana"

# ä½†æ˜¯ å­—èŠ‚åºåˆ—çš„æ¨¡å¼åŒ¹é…åªä½œç”¨äºå­—èŠ‚ï¼Œå¯¹äºå¤šä¸ªå­—èŠ‚å­˜å‚¨çš„å­—ç¬¦ä¸²ï¼Œåªä¼šåŒ¹é…ç¬¬ä¸€ä¸ªå­—èŠ‚è€Œéç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚
iex(35)> "Ã¼" <> <<0>>
<<195, 188, 0>>
iex(36)> <<x, rest::binary>> = "Ã¼ber"
"Ã¼ber"
iex(37)> x == ?Ã¼
false
iex(38)> rest
<<188, 98, 101, 114>>
```

## å­—ç¬¦åˆ—è¡¨(`charlist`)

å­—ç¬¦åˆ—è¡¨æ˜¯ä¸€ä¸ªç ç‚¹çš„åˆ—è¡¨ã€‚

```elixir
iex(39)> [?h, ?e, ?l, ?l, ?o]
~c"hello"
```

iexä¼šå°†ï¼Œ0-127çš„æ•°å­—çš„åˆ—è¡¨è§£é‡Šæˆå­—ç¬¦åˆ—è¡¨ï¼Œä¼šæ˜¾ç¤ºä»–ç›¸åº”çš„`ascii`å­—ç¬¦ã€‚

```elixir
iex(40)> heartbeats_per_minute = [99, 97, 116]
~c"cat"

# å¯ä»¥ä½¿ç”¨`inspect/2`å¼ºåˆ¶æ‰“å°åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„å†…å®¹
iex(41)> inspect(heartbeats_per_minute, charlists: :as_list)
"[99, 97, 116]"

# å­—ç¬¦ä¸²è½¬å­—ç¬¦åˆ—è¡¨
iex(42)> to_charlist("heÅ‚Å‚o")
[104, 101, 322, 322, 111]

# å­—ç¬¦åˆ—è¡¨è½¬å­—ç¬¦ä¸²
iex(43)> to_string(~c"heÅ‚Å‚o")
"heÅ‚Å‚o"

# å­—ç¬¦åˆ—è¡¨æ‹¼æ¥éœ€è¦ä½¿ç”¨ `++`
iex(44)> ~c"this " ++ ~c"works"
~c"this works"
iex(45)> ~c"this " <> ~c"fails"
error: invalid literal ~c"this " in <<>>
â””â”€ iex:45

** (CompileError) cannot compile code (errors have been logged)
```

